{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/saros/Desktop/MMN3/MMN3/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/saros/Desktop/MMN3/MMN3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/saros/Desktop/MMN3/MMN3/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// @ts-nocheck\nimport{useState,useEffect}from'react';import React,{useCallback}from'react';import{useHistory}from'react-router-dom';import{Button,Form,Container,FloatingLabel}from'react-bootstrap';import db from'../firebase';import firebase from'firebase';import{doc,getDoc}from'firebase/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Auth=function Auth(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var history=useHistory();var goToPage=useCallback(function(){return history.push('/page');},[history]);useEffect(function(){var getAuthUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var username2FromLocalStorage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username2FromLocalStorage=localStorage.getItem('MMNusername');console.log(username2FromLocalStorage);if(!username2FromLocalStorage||username2FromLocalStorage===undefined||username2FromLocalStorage===''){console.log(\"Auth fail\");}else{console.log(\"Auth success\");goToPage();}case 3:case\"end\":return _context.stop();}}},_callee);}));return function getAuthUser(){return _ref.apply(this,arguments);};}();return getAuthUser();},[]);useEffect(function(){return getGang();},[]);var getGang=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var docRef,docSnap;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:docRef=doc(db,\"users\",\"users\");_context2.next=3;return getDoc(docRef);case 3:docSnap=_context2.sent;if(docSnap.exists()){console.log(docSnap.data().users);setUsers(docSnap.data().users);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getGang(){return _ref2.apply(this,arguments);};}();var _useState3=useState(localStorage.getItem('username')),_useState4=_slicedToArray(_useState3,2),username2=_useState4[0],setUserName2=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUserName=_useState6[1];var onSubmit=function onSubmit(e){if(!username||username===''||username===undefined){e.preventDefault();alert(\"Who are you?\");}else{localStorage.setItem(\"MMNusername\",username);setUserName(localStorage.getItem('MMNusername'));goToPage();}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"m-3\",children:/*#__PURE__*/_jsx(FloatingLabel,{controlId:\"floatingSelect\",label:\"Choose your fighter!\",children:/*#__PURE__*/_jsxs(Form.Select,{\"aria-label\":\"Floating label select example\",onChange:function onChange(e){return setUserName(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{}),users.map(function(user,index){return/*#__PURE__*/_jsxs(\"option\",{value:user,children:[\" \",user,\" \"]},index);})]})})}),/*#__PURE__*/_jsx(Button,{className:\"m-3\",variant:\"success\",type:\"submit\",children:\"Give me the blood!\"}),' ']})})});};export default Auth;","map":{"version":3,"sources":["C:/Users/saros/Desktop/MMN3/MMN3/src/components/Auth.js"],"names":["useState","useEffect","React","useCallback","useHistory","Button","Form","Container","FloatingLabel","db","firebase","doc","getDoc","Auth","props","users","setUsers","history","goToPage","push","getAuthUser","username2FromLocalStorage","localStorage","getItem","console","log","undefined","getGang","docRef","docSnap","exists","data","username2","setUserName2","username","setUserName","onSubmit","e","preventDefault","alert","setItem","target","value","map","user","index"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport { useState, useEffect } from 'react'\r\nimport React, { useCallback } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Button, Form, Container, FloatingLabel, } from 'react-bootstrap';\r\nimport db from '../firebase'\r\nimport firebase from 'firebase';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\n\r\n\r\nconst Auth = (props) => {\r\n\r\n    const [users, setUsers] = useState([]);\r\n\r\n    const history = useHistory();\r\n    const goToPage = useCallback(() => history.push('/page'), [history]);\r\n\r\n    useEffect(() => {\r\n        const getAuthUser = async () => {\r\n            const username2FromLocalStorage = localStorage.getItem('MMNusername')\r\n            console.log(username2FromLocalStorage)\r\n            if (!username2FromLocalStorage || username2FromLocalStorage === undefined || username2FromLocalStorage === '') {\r\n                console.log(\"Auth fail\")\r\n            } else {\r\n                console.log(\"Auth success\")\r\n                goToPage()\r\n\r\n            }\r\n        }\r\n        return getAuthUser()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n       return getGang()\r\n    }, [])\r\n\r\n    const getGang = async () => {\r\n        const docRef = doc(db, \"users\", \"users\");\r\n        const docSnap = await getDoc(docRef);\r\n        if(docSnap.exists()){\r\n            console.log(docSnap.data().users)\r\n            setUsers(docSnap.data().users)\r\n        }\r\n    }\r\n\r\n    const [username2, setUserName2] = useState(localStorage.getItem('username'))\r\n    const [username, setUserName] = useState('')\r\n\r\n    const onSubmit = (e) => {\r\n        if (!username || username === '' || username === undefined) {\r\n            e.preventDefault()\r\n            alert(\"Who are you?\")\r\n        } else {\r\n            localStorage.setItem(\"MMNusername\", username);\r\n            setUserName(localStorage.getItem('MMNusername'))\r\n            goToPage()\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Container>       \r\n                <Form onSubmit={onSubmit} >\r\n                <div className=\"m-3\">\r\n                    <FloatingLabel controlId=\"floatingSelect\" label=\"Choose your fighter!\">\r\n                        <Form.Select aria-label=\"Floating label select example\" onChange={(e) => setUserName(e.target.value)}>\r\n                            <option></option>\r\n                            {users.map((user, index) => {\r\n                                return (<option key={index} value={user}> {user} </option>)\r\n                            })}\r\n                        </Form.Select>\r\n                    </FloatingLabel>\r\n                    </div>\r\n                    <Button className=\"m-3\" variant=\"success\" type='submit' >Give me the blood!</Button>{' '}\r\n                </Form>\r\n            </Container>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Auth;"]},"metadata":{},"sourceType":"module"}